CXX = g++
CXXFLAGS = -Wall -Wextra -std=c++11 -g -O0
OPENCV_LIB = -lopencv_core -lopencv_highgui -lopencv_imgcodecs -lopencv_videoio -lopencv_imgproc
DIR_OPENCV = -I/usr/local/include/opencv4

all: tp1

tp1: obj/tp1.o obj/RegionRe.o obj/ReSeed.o obj/ReComputeRegions.o obj/ReComputeSeed.o 
	$(CXX) $(CXXFLAGS) obj/tp1.o obj/RegionRe.o obj/ReSeed.o obj/ReComputeRegions.o obj/ReComputeSeed.o -o tp1 $(OPENCV_LIB)

obj/tp1.o: src/main2.cpp src/fonctions.hpp src/ReComputeRegions.hpp src/RegionRe.hpp src/ReSeed.hpp
	$(CXX) $(CXXFLAGS) -c src/main2.cpp -o obj/tp1.o  $(DIR_OPENCV)

obj/RegionRe.o: src/RegionRe.cpp src/RegionRe.hpp
	$(CXX) $(CXXFLAGS) -c src/RegionRe.cpp -o obj/RegionRe.o $(DIR_OPENCV)

obj/ReSeed.o: src/ReSeed.cpp src/ReSeed.hpp
	$(CXX) $(CXXFLAGS) -c src/ReSeed.cpp -o obj/ReSeed.o $(DIR_OPENCV)

obj/ReComputeRegions.o: src/ReComputeRegions.cpp src/ReComputeRegions.hpp src/RecomputeSeed.hpp src/RegionRe.hpp
	$(CXX) $(CXXFLAGS) -c src/ReComputeRegions.cpp -o obj/ReComputeRegions.o $(DIR_OPENCV)

obj/ReComputeSeed.o: src/ReComputeSeed.cpp src/ReComputeSeed.hpp src/ReSeed.hpp
	$(CXX) $(CXXFLAGS) -c src/ReComputeSeed.cpp -o obj/ReComputeSeed.o $(DIR_OPENCV)

clean:
	rm obj/*.o

.DEFAULT_GOAL := all

.PHONY: all clean
